<!-- sub header -->
<div class="bg-light lter b-b wrapper-md">
  <div class="row">
    <div class="col-sm-6 col-xs-12">
      <h1 class="m-n font-thin h3 text-black">Inicio</h1>
      <small class="text-muted">Lista de tareas</small>
    </div>
  </div>
</div>
<!-- sub header -->

<!-- Modal -->
<div id="myModal" class="modal fade" role="dialog" ng-controller="modalController">
  <div class="modal-dialog">
    <div class="modal-content">
      <form ng-submit="newTask()"> 
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Nueva tarea</h4>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-xs-12">
              <div class="form-group">
                <label for="title">Titulo :</label>
                <input required type='text' class="form-control" ng-model="task.title" id="title">
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-xs-6">
              <div class="form-group">
                <label for="moduleSelect">Modulo :</label>
                <select required name="moduleSelect" id="moduleSelect" ng-model="task.module" class="form-control">
                  <option ng-repeat="optM in modules" value="{{optM.id}}">{{optM.tag}} - {{optM.name}}</option>
                </select>
              </div>
            </div>
            <div class="col-xs-6">
              <div class="form-group">
                <label for="clientSelect">Cliente :</label>
                <select required name="clientSelect" id="clientSelect" ng-model="task.client" class="form-control">
                  <option ng-repeat="option in clients" value="{{option.id}}">{{option.name}} {{option.lastname}}</option>
                </select>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-xs-6">
              <div class="form-group">
                <label for="urgencySelect">Urgencia :</label>
                <select required name="urgencySelect" id="urgencySelect" ng-model="task.urgency" class="form-control">
                  <option ng-repeat="ur in urgency" value="{{ur.id}}">{{ur.name}}</option>
                </select>
              </div>
          </div>
            <div class="col-xs-6">
              <div class="form-group">
                <label for="estimation_hours">Horas estimadas:</label>
                <input type='text' class="form-control" ng-model="task.estimation_hours" id="estimation_hours">
              </div>
            </div>
          </div>  
            <div class="row">
              <div class="col-xs-6">  
                <div class="form-group">
                  <label for="start_date">Fecha de comienzo :</label>
                  <input type='text' class="form-control" ng-model="task.start_date" jqdatepicker id="start_date">
                </div>
              </div>
              <div class="col-xs-6">  
                <div class="form-group">
                  <label for="finish_date">Fecha de finalizacion :</label>
                  <input type="text" class="form-control" ng-model="task.finish_date" jqdatepicker id="finish_date"/>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-xs-6"> 
                <div class="form-group">
                  <label for="description">Descripcion :</label>
                  <input type='text' class="form-control" ng-model="task.description" id="description">
                </div>
              </div> 
              <div class="col-xs-6"> 
                <div class="form-group">
                  <label for="sar">Sar :</label>
                  <input type='text' class="form-control" ng-model="task.sar" id="sar">
                </div>
              </div> 
            </div>
            <div class="row">
              <div class="col-xs-6"> 
                <div class="form-group">
                  <label for="turnover_code">Codigo de turnover :</label>
                  <input type='text' class="form-control" ng-model="task.turnover_code" id="turnover_code">
                </div>
              </div>
              <div class="col-xs-6"> 
                <div class="form-group">
                  <label for="priority">Prioridad :</label>
                  <input type='text' class="form-control" ng-model="task.priority" id="priority">
                </div>
              </div>
            </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" type="submit">Guardar</button>
          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="wrapper-md">
  <!-- tasks -->
  <div class="panel wrapper">
    <div class="row no-margin">
      <div class="col-md-12 b-light no-border-xs">
        <a href="" class="text-muted pull-right text-lg"></a>
        <div class="btn-group pull-right" role="group">
          <button ng-click="vm.done = null" class="btn btn-info btn-sm">Todas</button> 
          <button ng-click="vm.done = 'False'" class="btn btn-info btn-sm">Abiertas</button> 
          <button ng-click="vm.done = 'True'" class="btn btn-info btn-sm">Cerradas</button> 
          <button data-toggle="modal" data-target="#myModal" class="btn btn-info btn-sm">Agregar tarea</button>
        </div>
        <h4 class="font-thin m-t-none m-b-md-30 text-muted">Tareas</h4>
        
        <div class=" m-b">
          <div class="m-b" ng-repeat="tdTask in tasks | filter: (vm.done || '') && {done: vm.done}">
            <span class="label text-base bg-info pos-rlt m-r">
              <i class="arrow right arrow-info"></i>
              {{tdTask.finish_date}}
            </span>
            <a href="#/test/{{tdTask.id}}">{{tdTask.title}}</a>
            <span class="pull-right label text-base-12 bg-primary-white pos-rlt m-r">Prioridad: {{ tdTask.priority }}</span>
            <span class="pull-right label text-base-12 bg-success-white pos-rlt m-r">Horas estimadas: {{ tdTask.estimation_hours }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- / tasks -->
</div>

